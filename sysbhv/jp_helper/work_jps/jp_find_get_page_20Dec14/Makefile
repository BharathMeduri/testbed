# Makefile for Jprobe kernel module
# Dynamically generated by jprobeit.sh !
#  For jp_find_get_page_20Dec14.c

ifneq ($(KERNELRELEASE),)
	EXTRA_CFLAGS += -DDEBUG #-DUSE_FTRACE_PRINT
	obj-m := jp_find_get_page_20Dec14.o

else
	#########################################
	# To support cross-compiling for the ARM:
	# For ARM, invoke make as:
	# make ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi- 
	ifeq ($(ARCH),arm)
	# Update 'KDIR' below to point to the ARM Linux kernel source tree
		KDIR ?= ~/3.10.24
	else
		KDIR ?= /lib/modules/$(shell uname -r)/build 
	endif
	#########################################
	PWD   := $(shell pwd)
default:
	$(info Dynamic Makefile:)
	$(info Building for ARCH ${ARCH} and KERNELRELEASE ${KERNELRELEASE}) 
	$(MAKE) -C $(KDIR) M=$(PWD) modules
endif
clean:
	$(MAKE) -C $(KDIR) SUBDIRS=$(PWD) clean
